<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_211) on Fri Aug 09 20:16:15 EDT 2019 -->
<title>Server</title>
<meta name="date" content="2019-08-09">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Server";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Server.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../cu/su/net/ForwardedMessage.html" title="class in cu.su.net"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?cu/su/net/Server.html" target="_top">Frames</a></li>
<li><a href="Server.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">cu.su.net</div>
<h2 title="Class Server" class="title">Class Server</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>cu.su.net.Server</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../cu/su/controller/GameServer.html" title="class in cu.su.controller">GameServer</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Server</span>
extends java.lang.Object</pre>
<div class="block">A Server is a server for a "netgame".  When a Server is created, it will
 listen for connection requests from clients on a specified port.
 The clients are the players in the game.  Each player is identified
 by an ID number that is assigned by the Server when the client connects.
 Clients are defined by subclasses of the class netgame.commen.Client.
 <p>A Server is a "message center" that can send and receive messages.
 A message can be any non-null object that implements the Serializable interface.
 Many standard classes, including String, do this.  (So, a message might
 simply be a string.)  When a message  is received, the protected method
 messageReceived(sender,message) is called.  In this class, this method
 simply wraps the message in a ForwardedMessage, which it then
 sends to all connected clients.  That is, the Server acts as a passive
 forwarder of messages.  Subclasses will usually override this method
 and will generally add other functionality to the Server as well.
 <p>The sendToAll(msg) method sends a message to all connected clients.
 The sendToOne(playerID,msg) method will send the message to just the
 client with the specified ID number.  If the same object is transmitted
 more than once, it might be necessary to use the resetOutput() or
 setAutoReset(true) methods.  See those methods for details.
 <p>(Certain messages that are defined by package private classes in
 the package netgame.common, are for internal use only.  These messages
 do not result in a call to messageReceived, and they are not seen
 by clients.)

 <p>The communication protocol that is used internally goes as follows:
 <ul>
 <li>When the server receives a connection request, it expects to
 read a string from the client.  The string is "Hello Server".</li>
 <li>The server responds by sending an object of type Integer
 representing the unique ID number that has been assigned to the client.
 Clients are assigned the IDs 1, 2, 3, ..., in the order they connect.</li>
 <li>The extraHandshake() method is called.  This method does nothing
 in this class, but subclasses of Server can override it to do extra setup
 or checking before the connection is considered to be created.
 Note that if extraHandshake() throws an error, then the client is
 never considered connected, but that client's ID will not be reused.</li>
 <li>All connected clients, including the one that has just connected,
 are notified of the new client.  (The playerConnected() method in
 the client will be called.)</li>
 <li>Once a client has successfully connected, the client can send messages to
 the server.  Messages received from a client are passed to the
 messageReceived() method.</li>
 <li>If the client's disconnect() method is called, the Server is notified,
 and it in turn notifies all connected clients, not including the one
 that just disconnected.  (The clients' playerDisconnected() method
 is called.)</li>
 <li>If the Server's shutDownServer() method is called, all the clients
 will be notified, and the ServerSocket, if any still exists, is closed down.
 One second later, any connection that has not closed normally is closed.
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#Server-int-">Server</a></span>(int&nbsp;port)</code>
<div class="block">Creates a Server listening on a specified port, and starts a thread for
 processing messages that are received from clients.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#getAutoreset--">getAutoreset</a></span>()</code>
<div class="block">Returns the value of the autoreset property.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#getPlayerList--">getPlayerList</a></span>()</code>
<div class="block">Gets a list of ID numbers of currently connected clients.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#resetOutput--">resetOutput</a></span>()</code>
<div class="block">Resets all output streams, after any messages currently in the output queue
 have been sent.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#restartServer-int-">restartServer</a></span>(int&nbsp;port)</code>
<div class="block">Restarts listening and accepting new clients.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#sendToAll-java.lang.Object-">sendToAll</a></span>(java.lang.Object&nbsp;message)</code>
<div class="block">Sends a specified non-null Object as a message to all connected clients.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#sendToOne-int-java.lang.Object-">sendToOne</a></span>(int&nbsp;recipientID,
         java.lang.Object&nbsp;message)</code>
<div class="block">Sends a specified non-null Object as a message to one connected client.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#setAutoreset-boolean-">setAutoreset</a></span>(boolean&nbsp;auto)</code>
<div class="block">If the autoreset property is set to true, then all output streams will be reset
 before every object transmission.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#shutDownServer--">shutDownServer</a></span>()</code>
<div class="block">Disconnects all currently connected clients and stops accepting new client
 requests.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../cu/su/net/Server.html#shutdownServerSocket--">shutdownServerSocket</a></span>()</code>
<div class="block">Stops listening, without disconnecting any currently connected clients.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Server-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Server</h4>
<pre>public&nbsp;Server(int&nbsp;port)
       throws java.io.IOException</pre>
<div class="block">Creates a Server listening on a specified port, and starts a thread for
 processing messages that are received from clients.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>port</code> - the port on which the server will listen.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if it is not possible to create a listening socket on the specified port.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getPlayerList--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPlayerList</h4>
<pre>public&nbsp;int[]&nbsp;getPlayerList()</pre>
<div class="block">Gets a list of ID numbers of currently connected clients.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array containing the ID numbers of all the connected clients.
 The array is newly created each time this method is called.</dd>
</dl>
</li>
</ul>
<a name="shutdownServerSocket--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownServerSocket</h4>
<pre>public&nbsp;void&nbsp;shutdownServerSocket()</pre>
<div class="block">Stops listening, without disconnecting any currently connected clients.
 You might do this, for example, if some maximum number of player connections has
 been reached, as when a game only allows two players.</div>
</li>
</ul>
<a name="restartServer-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restartServer</h4>
<pre>public&nbsp;void&nbsp;restartServer(int&nbsp;port)
                   throws java.io.IOException</pre>
<div class="block">Restarts listening and accepting new clients.  This would only be used if
 the shutDownServer() method has been called previously.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>port</code> - the port on which the server should listen.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if it is impossible to create a listening socket on the specified port.</dd>
</dl>
</li>
</ul>
<a name="shutDownServer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutDownServer</h4>
<pre>public&nbsp;void&nbsp;shutDownServer()</pre>
<div class="block">Disconnects all currently connected clients and stops accepting new client
 requests.  It is still possible to restart listening after this method has
 been called, by calling the restartServer() method.</div>
</li>
</ul>
<a name="sendToAll-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendToAll</h4>
<pre>public&nbsp;void&nbsp;sendToAll(java.lang.Object&nbsp;message)</pre>
<div class="block">Sends a specified non-null Object as a message to all connected clients.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>message</code> - the message to be sent to all connected clients.  This object must
                implement the Serializable interface.  Messages must not be null.</dd>
</dl>
</li>
</ul>
<a name="sendToOne-int-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendToOne</h4>
<pre>public&nbsp;boolean&nbsp;sendToOne(int&nbsp;recipientID,
                         java.lang.Object&nbsp;message)</pre>
<div class="block">Sends a specified non-null Object as a message to one connected client.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>recipientID</code> - the ID number of the player to whom the message is
                    to be sent.  If there is no such player, then the method returns the
                    value false.</dd>
<dd><code>message</code> - the message to be sent to all connected clients.  This object must
                    implement the Serializable interface.  Messages must not be null.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the specified recipient exists, false if not.</dd>
</dl>
</li>
</ul>
<a name="resetOutput--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetOutput</h4>
<pre>public&nbsp;void&nbsp;resetOutput()</pre>
<div class="block">Resets all output streams, after any messages currently in the output queue
 have been sent.  The stream only needs to be reset in one case:  If the same
 object is transmitted more than once, and changes have been made to it
 between transmissions.  The reason for this is that ObjectOutputStreams are
 optimized for sending objects that don't change -- if the same object is sent
 twice it will not actually be transmitted the second time, unless the stream
 has been reset in the meantime.</div>
</li>
</ul>
<a name="getAutoreset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAutoreset</h4>
<pre>public&nbsp;boolean&nbsp;getAutoreset()</pre>
<div class="block">Returns the value of the autoreset property.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>autoreset</dd>
</dl>
</li>
</ul>
<a name="setAutoreset-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setAutoreset</h4>
<pre>public&nbsp;void&nbsp;setAutoreset(boolean&nbsp;auto)</pre>
<div class="block">If the autoreset property is set to true, then all output streams will be reset
 before every object transmission.  Use this if the same object is going to be
 continually changed and retransmitted.  See the resetOutput() method for more
 information on resetting the output stream.  The default value is false.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>auto</code> - keeps the autoreset working.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Server.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../cu/su/net/ForwardedMessage.html" title="class in cu.su.net"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?cu/su/net/Server.html" target="_top">Frames</a></li>
<li><a href="Server.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
